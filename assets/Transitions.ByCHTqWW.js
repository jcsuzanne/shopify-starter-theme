import{d as tt}from"./piecesjs.DkskFDtB.js";import{h as b,b as I}from"./environment.D8oKDaJt.js";import{g as V}from"./index.DjKJqAo0.js";import{u as et}from"./components.EMc0sSo5.js";import"./preload-helper.D6kgxu3v.js";const x=new WeakMap;function q(s,t,e,i){if(!s&&!x.has(t))return!1;const o=x.get(t)??new WeakMap;x.set(t,o);const n=o.get(e)??new Set;o.set(e,n);const r=n.has(i);return s?n.add(i):n.delete(i),r&&s}function st(s,t){let e=s.target;if(e instanceof Text&&(e=e.parentElement),e instanceof Element&&s.currentTarget instanceof Element){const i=e.closest(t);if(i&&s.currentTarget.contains(i))return i}}function it(s,t,e,i={}){const{signal:o,base:n=document}=i;if(o!=null&&o.aborted)return;const{once:r,...a}=i,l=n instanceof Document?n.documentElement:n,c=!!(typeof i=="object"?i.capture:i),h=f=>{const m=st(f,String(s));if(m){const p=Object.assign(f,{delegateTarget:m});e.call(l,p),r&&(l.removeEventListener(t,h,a),q(!1,l,e,u))}},u=JSON.stringify({selector:s,type:t,capture:c});q(!0,l,e,u)||l.addEventListener(t,h,a),o==null||o.addEventListener("abort",()=>{q(!1,l,e,u)})}function v(){return v=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},v.apply(null,arguments)}const G=(s,t)=>String(s).toLowerCase().replace(/[\s/_.]+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")||t||"",S=({hash:s}={})=>window.location.pathname+window.location.search+(s?window.location.hash:""),ot=(s,t={})=>{const e=v({url:s=s||S({hash:!0}),random:Math.random(),source:"swup"},t);window.history.pushState(e,"",s)},P=(s=null,t={})=>{s=s||S({hash:!0});const e=v({},window.history.state||{},{url:s,random:Math.random(),source:"swup"},t);window.history.replaceState(e,"",s)},nt=(s,t,e,i)=>{const o=new AbortController;return i=v({},i,{signal:o.signal}),it(s,t,e,i),{destroy:()=>o.abort()}};let y=class $ extends URL{constructor(t,e=document.baseURI){super(t.toString(),e),Object.setPrototypeOf(this,$.prototype)}get url(){return this.pathname+this.search}static fromElement(t){const e=t.getAttribute("href")||t.getAttribute("xlink:href")||"";return new $(e)}static fromUrl(t){return new $(t)}};class C extends Error{constructor(t,e){super(t),this.url=void 0,this.status=void 0,this.aborted=void 0,this.timedOut=void 0,this.name="FetchError",this.url=e.url,this.status=e.status,this.aborted=e.aborted||!1,this.timedOut=e.timedOut||!1}}async function rt(s,t={}){var e;s=y.fromUrl(s).url;const{visit:i=this.visit}=t,o=v({},this.options.requestHeaders,t.headers),n=(e=t.timeout)!=null?e:this.options.timeout,r=new AbortController,{signal:a}=r;t=v({},t,{headers:o,signal:a});let l,c=!1,h=null;n&&n>0&&(h=setTimeout(()=>{c=!0,r.abort("timeout")},n));try{l=await this.hooks.call("fetch:request",i,{url:s,options:t},(w,{url:g,options:k})=>fetch(g,k)),h&&clearTimeout(h)}catch(w){throw c?(this.hooks.call("fetch:timeout",i,{url:s}),new C(`Request timed out: ${s}`,{url:s,timedOut:c})):(w==null?void 0:w.name)==="AbortError"||a.aborted?new C(`Request aborted: ${s}`,{url:s,aborted:!0}):w}const{status:u,url:d}=l,f=await l.text();if(u===500)throw this.hooks.call("fetch:error",i,{status:u,response:l,url:d}),new C(`Server error: ${d}`,{status:u,url:d});if(!f)throw new C(`Empty response: ${d}`,{status:u,url:d});const{url:m}=y.fromUrl(d),p={url:m,html:f};return!i.cache.write||t.method&&t.method!=="GET"||s!==m||this.cache.set(p.url,p),p}class at{constructor(t){this.swup=void 0,this.pages=new Map,this.swup=t}get size(){return this.pages.size}get all(){const t=new Map;return this.pages.forEach((e,i)=>{t.set(i,v({},e))}),t}has(t){return this.pages.has(this.resolve(t))}get(t){const e=this.pages.get(this.resolve(t));return e&&v({},e)}set(t,e){e=v({},e,{url:t=this.resolve(t)}),this.pages.set(t,e),this.swup.hooks.callSync("cache:set",void 0,{page:e})}update(t,e){t=this.resolve(t);const i=v({},this.get(t),e,{url:t});this.pages.set(t,i)}delete(t){this.pages.delete(this.resolve(t))}clear(){this.pages.clear(),this.swup.hooks.callSync("cache:clear",void 0,void 0)}prune(t){this.pages.forEach((e,i)=>{t(i,e)&&this.delete(i)})}resolve(t){const{url:e}=y.fromUrl(t);return this.swup.resolveUrl(e)}}const j=(s,t=document)=>t.querySelector(s),A=(s,t=document)=>Array.from(t.querySelectorAll(s)),X=()=>new Promise(s=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{s()})})});function J(s){return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"}function lt(s,t=[]){return new Promise((e,i)=>{const o=s(...t);J(o)?o.then(e,i):e(o)})}function ct(s){var t;(t=s=s||document.body)==null||t.getBoundingClientRect()}function M(s,t){const e=s==null?void 0:s.closest(`[${t}]`);return e!=null&&e.hasAttribute(t)?(e==null?void 0:e.getAttribute(t))||!0:void 0}class ht{constructor(t){this.swup=void 0,this.swupClasses=["to-","is-changing","is-rendering","is-popstate","is-animating","is-leaving"],this.swup=t}get selectors(){const{scope:t}=this.swup.visit.animation;return t==="containers"?this.swup.visit.containers:t==="html"?["html"]:Array.isArray(t)?t:[]}get selector(){return this.selectors.join(",")}get targets(){return this.selector.trim()?A(this.selector):[]}add(...t){this.targets.forEach(e=>e.classList.add(...t))}remove(...t){this.targets.forEach(e=>e.classList.remove(...t))}clear(){this.targets.forEach(t=>{const e=t.className.split(" ").filter(i=>this.isSwupClass(i));t.classList.remove(...e)})}isSwupClass(t){return this.swupClasses.some(e=>t.startsWith(e))}}class Q{constructor(t,e){this.id=void 0,this.state=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.animation=void 0,this.trigger=void 0,this.cache=void 0,this.history=void 0,this.scroll=void 0;const{to:i,from:o,hash:n,el:r,event:a}=e;this.id=Math.random(),this.state=1,this.from={url:o??t.location.url,hash:t.location.hash},this.to={url:i,hash:n},this.containers=t.options.containers,this.animation={animate:!0,wait:!1,name:void 0,native:t.options.native,scope:t.options.animationScope,selector:t.options.animationSelector},this.trigger={el:r,event:a},this.cache={read:t.options.cache,write:t.options.cache},this.history={action:"push",popstate:!1,direction:void 0},this.scroll={reset:!0,target:void 0}}advance(t){this.state<t&&(this.state=t)}abort(){this.state=8}get done(){return this.state>=7}}function ut(s){return new Q(this,s)}class dt{constructor(t){this.swup=void 0,this.registry=new Map,this.hooks=["animation:out:start","animation:out:await","animation:out:end","animation:in:start","animation:in:await","animation:in:end","animation:skip","cache:clear","cache:set","content:replace","content:scroll","enable","disable","fetch:request","fetch:error","fetch:timeout","history:popstate","link:click","link:self","link:anchor","link:newtab","page:load","page:view","scroll:top","scroll:anchor","visit:start","visit:transition","visit:abort","visit:end"],this.swup=t,this.init()}init(){this.hooks.forEach(t=>this.create(t))}create(t){this.registry.has(t)||this.registry.set(t,new Map)}exists(t){return this.registry.has(t)}get(t){const e=this.registry.get(t);if(e)return e;console.error(`Unknown hook '${t}'`)}clear(){this.registry.forEach(t=>t.clear())}on(t,e,i={}){const o=this.get(t);if(!o)return console.warn(`Hook '${t}' not found.`),()=>{};const n=v({},i,{id:o.size+1,hook:t,handler:e});return o.set(e,n),()=>this.off(t,e)}before(t,e,i={}){return this.on(t,e,v({},i,{before:!0}))}replace(t,e,i={}){return this.on(t,e,v({},i,{replace:!0}))}once(t,e,i={}){return this.on(t,e,v({},i,{once:!0}))}off(t,e){const i=this.get(t);i&&e?i.delete(e)||console.warn(`Handler for hook '${t}' not found.`):i&&i.clear()}async call(t,e,i,o){const[n,r,a]=this.parseCallArgs(t,e,i,o),{before:l,handler:c,after:h}=this.getHandlers(t,a);await this.run(l,n,r);const[u]=await this.run(c,n,r,!0);return await this.run(h,n,r),this.dispatchDomEvent(t,n,r),u}callSync(t,e,i,o){const[n,r,a]=this.parseCallArgs(t,e,i,o),{before:l,handler:c,after:h}=this.getHandlers(t,a);this.runSync(l,n,r);const[u]=this.runSync(c,n,r,!0);return this.runSync(h,n,r),this.dispatchDomEvent(t,n,r),u}parseCallArgs(t,e,i,o){return e instanceof Q||typeof e!="object"&&typeof i!="function"?[e,i,o]:[void 0,e,i]}async run(t,e=this.swup.visit,i,o=!1){const n=[];for(const{hook:r,handler:a,defaultHandler:l,once:c}of t)if(e==null||!e.done){c&&this.off(r,a);try{const h=await lt(a,[e,i,l]);n.push(h)}catch(h){if(o)throw h;console.error(`Error in hook '${r}':`,h)}}return n}runSync(t,e=this.swup.visit,i,o=!1){const n=[];for(const{hook:r,handler:a,defaultHandler:l,once:c}of t)if(e==null||!e.done){c&&this.off(r,a);try{const h=a(e,i,l);n.push(h),J(h)&&console.warn(`Swup will not await Promises in handler for synchronous hook '${r}'.`)}catch(h){if(o)throw h;console.error(`Error in hook '${r}':`,h)}}return n}getHandlers(t,e){const i=this.get(t);if(!i)return{found:!1,before:[],handler:[],after:[],replaced:!1};const o=Array.from(i.values()),n=this.sortRegistrations,r=o.filter(({before:u,replace:d})=>u&&!d).sort(n),a=o.filter(({replace:u})=>u).filter(u=>!0).sort(n),l=o.filter(({before:u,replace:d})=>!u&&!d).sort(n),c=a.length>0;let h=[];if(e&&(h=[{id:0,hook:t,handler:e}],c)){const u=a.length-1,d=f=>{const m=a[f-1];return m?(p,w)=>m.handler(p,w,d(f-1)):e};h=[{id:0,hook:t,handler:a[u].handler,defaultHandler:d(u)}]}return{found:!0,before:r,handler:h,after:l,replaced:c}}sortRegistrations(t,e){var i,o;return((i=t.priority)!=null?i:0)-((o=e.priority)!=null?o:0)||t.id-e.id||0}dispatchDomEvent(t,e,i){if(e!=null&&e.done)return;const o={hook:t,args:i,visit:e||this.swup.visit};document.dispatchEvent(new CustomEvent("swup:any",{detail:o,bubbles:!0})),document.dispatchEvent(new CustomEvent(`swup:${t}`,{detail:o,bubbles:!0}))}}const pt=s=>{if(s&&s.charAt(0)==="#"&&(s=s.substring(1)),!s)return null;const t=decodeURIComponent(s);let e=document.getElementById(s)||document.getElementById(t)||j(`a[name='${CSS.escape(s)}']`)||j(`a[name='${CSS.escape(t)}']`);return e||s!=="top"||(e=document.body),e},L="transition",H="animation";async function mt({selector:s,elements:t}){if(s===!1&&!t)return;let e=[];if(t)e=Array.from(t);else if(s&&(e=A(s,document.body),!e.length))return void console.warn(`[swup] No elements found matching animationSelector \`${s}\``);const i=e.map(o=>function(n){const{type:r,timeout:a,propCount:l}=function(c){const h=window.getComputedStyle(c),u=O(h,`${L}Delay`),d=O(h,`${L}Duration`),f=B(u,d),m=O(h,`${H}Delay`),p=O(h,`${H}Duration`),w=B(m,p),g=Math.max(f,w),k=g>0?f>w?L:H:null;return{type:k,timeout:g,propCount:k?k===L?d.length:p.length:0}}(n);return!(!r||!a)&&new Promise(c=>{const h=`${r}end`,u=performance.now();let d=0;const f=()=>{n.removeEventListener(h,m),c()},m=p=>{p.target===n&&((performance.now()-u)/1e3<p.elapsedTime||++d>=l&&f())};setTimeout(()=>{d<l&&f()},a+1),n.addEventListener(h,m)})}(o));i.filter(Boolean).length>0?await Promise.all(i):s&&console.warn(`[swup] No CSS animation duration defined on elements matching \`${s}\``)}function O(s,t){return(s[t]||"").split(", ")}function B(s,t){for(;s.length<t.length;)s=s.concat(s);return Math.max(...t.map((e,i)=>W(e)+W(s[i])))}function W(s){return 1e3*parseFloat(s)}function ft(s,t={},e={}){if(typeof s!="string")throw new Error("swup.navigate() requires a URL parameter");if(this.shouldIgnoreVisit(s,{el:e.el,event:e.event}))return void window.location.assign(s);const{url:i,hash:o}=y.fromUrl(s),n=this.createVisit(v({},e,{to:i,hash:o}));this.performNavigation(n,t)}async function gt(s,t={}){if(this.navigating){if(this.visit.state>=6)return s.state=2,void(this.onVisitEnd=()=>this.performNavigation(s,t));await this.hooks.call("visit:abort",this.visit,void 0),delete this.visit.to.document,this.visit.state=8}this.navigating=!0,this.visit=s;const{el:e}=s.trigger;t.referrer=t.referrer||this.location.url,t.animate===!1&&(s.animation.animate=!1),s.animation.animate||this.classes.clear();const i=t.history||M(e,"data-swup-history");typeof i=="string"&&["push","replace"].includes(i)&&(s.history.action=i);const o=t.animation||M(e,"data-swup-animation");var n,r;typeof o=="string"&&(s.animation.name=o),typeof t.cache=="object"?(s.cache.read=(n=t.cache.read)!=null?n:s.cache.read,s.cache.write=(r=t.cache.write)!=null?r:s.cache.write):t.cache!==void 0&&(s.cache={read:!!t.cache,write:!!t.cache}),delete t.cache;try{await this.hooks.call("visit:start",s,void 0),s.state=3;const a=this.hooks.call("page:load",s,{options:t},async(c,h)=>{let u;return c.cache.read&&(u=this.cache.get(c.to.url)),h.page=u||await this.fetchPage(c.to.url,h.options),h.cache=!!u,h.page});a.then(({html:c})=>{s.advance(5),s.to.html=c,s.to.document=new DOMParser().parseFromString(c,"text/html")});const l=s.to.url+s.to.hash;if(s.history.popstate||(s.history.action==="replace"||s.to.url===this.location.url?P(l):(this.currentHistoryIndex++,ot(l,{index:this.currentHistoryIndex}))),this.location=y.fromUrl(l),s.history.popstate&&this.classes.add("is-popstate"),s.animation.name&&this.classes.add(`to-${G(s.animation.name)}`),s.animation.wait&&await a,s.done||(await this.hooks.call("visit:transition",s,void 0,async()=>{if(!s.animation.animate)return await this.hooks.call("animation:skip",void 0),void await this.renderPage(s,await a);s.advance(4),await this.animatePageOut(s),s.animation.native&&document.startViewTransition?await document.startViewTransition(async()=>await this.renderPage(s,await a)).finished:await this.renderPage(s,await a),await this.animatePageIn(s)}),s.done))return;await this.hooks.call("visit:end",s,void 0,()=>this.classes.clear()),s.state=7,this.navigating=!1,this.onVisitEnd&&(this.onVisitEnd(),this.onVisitEnd=void 0)}catch(a){if(!a||a!=null&&a.aborted)return void(s.state=8);s.state=9,console.error(a),this.options.skipPopStateHandling=()=>(window.location.assign(s.to.url+s.to.hash),!0),window.history.back()}finally{delete s.to.document}}const wt=async function(s){await this.hooks.call("animation:out:start",s,void 0,()=>{this.classes.add("is-changing","is-animating","is-leaving")}),await this.hooks.call("animation:out:await",s,{skip:!1},(t,{skip:e})=>{if(!e)return this.awaitAnimations({selector:t.animation.selector})}),await this.hooks.call("animation:out:end",s,void 0)},vt=function(s){var t;const e=s.to.document;if(!e)return!1;const i=((t=e.querySelector("title"))==null?void 0:t.innerText)||"";document.title=i;const o=A('[data-swup-persist]:not([data-swup-persist=""])'),n=s.containers.map(r=>{const a=document.querySelector(r),l=e.querySelector(r);return a&&l?(a.replaceWith(l.cloneNode(!0)),!0):(a||console.warn(`[swup] Container missing in current document: ${r}`),l||console.warn(`[swup] Container missing in incoming document: ${r}`),!1)}).filter(Boolean);return o.forEach(r=>{const a=r.getAttribute("data-swup-persist"),l=j(`[data-swup-persist="${a}"]`);l&&l!==r&&l.replaceWith(r)}),n.length===s.containers.length},yt=function(s){const t={behavior:"auto"},{target:e,reset:i}=s.scroll,o=e??s.to.hash;let n=!1;return o&&(n=this.hooks.callSync("scroll:anchor",s,{hash:o,options:t},(r,{hash:a,options:l})=>{const c=this.getAnchorElement(a);return c&&c.scrollIntoView(l),!!c})),i&&!n&&(n=this.hooks.callSync("scroll:top",s,{options:t},(r,{options:a})=>(window.scrollTo(v({top:0,left:0},a)),!0))),n},bt=async function(s){if(s.done)return;const t=this.hooks.call("animation:in:await",s,{skip:!1},(e,{skip:i})=>{if(!i)return this.awaitAnimations({selector:e.animation.selector})});await X(),await this.hooks.call("animation:in:start",s,void 0,()=>{this.classes.remove("is-animating")}),await t,await this.hooks.call("animation:in:end",s,void 0)},kt=async function(s,t){if(s.done)return;s.advance(6);const{url:e}=t;this.isSameResolvedUrl(S(),e)||(P(e),this.location=y.fromUrl(e),s.to.url=this.location.url,s.to.hash=this.location.hash),await this.hooks.call("content:replace",s,{page:t},(i,{})=>{if(this.classes.remove("is-leaving"),i.animation.animate&&this.classes.add("is-rendering"),!this.replaceContent(i))throw new Error("[swup] Container mismatch, aborting");i.animation.animate&&(this.classes.add("is-changing","is-animating","is-rendering"),i.animation.name&&this.classes.add(`to-${G(i.animation.name)}`))}),await this.hooks.call("content:scroll",s,void 0,()=>this.scrollToContent(s)),await this.hooks.call("page:view",s,{url:this.location.url,title:document.title})},St=function(s){var t;if(t=s,!!(t!=null&&t.isSwupPlugin)){if(s.swup=this,!s._checkRequirements||s._checkRequirements())return s._beforeMount&&s._beforeMount(),s.mount(),this.plugins.push(s),this.plugins}else console.error("Not a swup plugin instance",s)};function Pt(s){const t=this.findPlugin(s);if(t)return t.unmount(),t._afterUnmount&&t._afterUnmount(),this.plugins=this.plugins.filter(e=>e!==t),this.plugins;console.error("No such plugin",t)}function Et(s){return this.plugins.find(t=>t===s||t.name===s||t.name===`Swup${String(s)}`)}function Tt(s){if(typeof this.options.resolveUrl!="function")return console.warn("[swup] options.resolveUrl expects a callback function."),s;const t=this.options.resolveUrl(s);return t&&typeof t=="string"?t.startsWith("//")||t.startsWith("http")?(console.warn("[swup] options.resolveUrl needs to return a relative url"),s):t:(console.warn("[swup] options.resolveUrl needs to return a url"),s)}function At(s,t){return this.resolveUrl(s)===this.resolveUrl(t)}const Ct={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',animationScope:"html",cache:!0,containers:["#swup"],ignoreVisit:(s,{el:t}={})=>!(t==null||!t.closest("[data-no-swup]")),linkSelector:"a[href]",linkToSelf:"scroll",native:!1,plugins:[],resolveUrl:s=>s,requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},skipPopStateHandling:s=>{var t;return((t=s.state)==null?void 0:t.source)!=="swup"},timeout:0};class Lt{get currentPageUrl(){return this.location.url}constructor(t={}){var e,i;this.version="4.7.0",this.options=void 0,this.defaults=Ct,this.plugins=[],this.visit=void 0,this.cache=void 0,this.hooks=void 0,this.classes=void 0,this.location=y.fromUrl(window.location.href),this.currentHistoryIndex=void 0,this.clickDelegate=void 0,this.navigating=!1,this.onVisitEnd=void 0,this.use=St,this.unuse=Pt,this.findPlugin=Et,this.log=()=>{},this.navigate=ft,this.performNavigation=gt,this.createVisit=ut,this.delegateEvent=nt,this.fetchPage=rt,this.awaitAnimations=mt,this.renderPage=kt,this.replaceContent=vt,this.animatePageIn=bt,this.animatePageOut=wt,this.scrollToContent=yt,this.getAnchorElement=pt,this.getCurrentUrl=S,this.resolveUrl=Tt,this.isSameResolvedUrl=At,this.options=v({},this.defaults,t),this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopState=this.handlePopState.bind(this),this.cache=new at(this),this.classes=new ht(this),this.hooks=new dt(this),this.visit=this.createVisit({to:""}),this.currentHistoryIndex=(e=(i=window.history.state)==null?void 0:i.index)!=null?e:1,this.enable()}async enable(){var t;const{linkSelector:e}=this.options;this.clickDelegate=this.delegateEvent(e,"click",this.handleLinkClick),window.addEventListener("popstate",this.handlePopState),this.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),this.options.native=this.options.native&&!!document.startViewTransition,this.options.plugins.forEach(i=>this.use(i)),((t=window.history.state)==null?void 0:t.source)!=="swup"&&P(null,{index:this.currentHistoryIndex}),await X(),await this.hooks.call("enable",void 0,void 0,()=>{const i=document.documentElement;i.classList.add("swup-enabled"),i.classList.toggle("swup-native",this.options.native)})}async destroy(){this.clickDelegate.destroy(),window.removeEventListener("popstate",this.handlePopState),this.cache.clear(),this.options.plugins.forEach(t=>this.unuse(t)),await this.hooks.call("disable",void 0,void 0,()=>{const t=document.documentElement;t.classList.remove("swup-enabled"),t.classList.remove("swup-native")}),this.hooks.clear()}shouldIgnoreVisit(t,{el:e,event:i}={}){const{origin:o,url:n,hash:r}=y.fromUrl(t);return o!==window.location.origin||!(!e||!this.triggerWillOpenNewWindow(e))||!!this.options.ignoreVisit(n+r,{el:e,event:i})}handleLinkClick(t){const e=t.delegateTarget,{href:i,url:o,hash:n}=y.fromElement(e);if(this.shouldIgnoreVisit(i,{el:e,event:t}))return;if(this.navigating&&o===this.visit.to.url)return void t.preventDefault();const r=this.createVisit({to:o,hash:n,el:e,event:t});t.metaKey||t.ctrlKey||t.shiftKey||t.altKey?this.hooks.callSync("link:newtab",r,{href:i}):t.button===0&&this.hooks.callSync("link:click",r,{el:e,event:t},()=>{var a;const l=(a=r.from.url)!=null?a:"";t.preventDefault(),o&&o!==l?this.isSameResolvedUrl(o,l)||this.performNavigation(r):n?this.hooks.callSync("link:anchor",r,{hash:n},()=>{P(o+n),this.scrollToContent(r)}):this.hooks.callSync("link:self",r,void 0,()=>{this.options.linkToSelf==="navigate"?this.performNavigation(r):(P(o),this.scrollToContent(r))})})}handlePopState(t){var e,i,o,n;const r=(e=(i=t.state)==null?void 0:i.url)!=null?e:window.location.href;if(this.options.skipPopStateHandling(t)||this.isSameResolvedUrl(S(),this.location.url))return;const{url:a,hash:l}=y.fromUrl(r),c=this.createVisit({to:a,hash:l,event:t});c.history.popstate=!0;const h=(o=(n=t.state)==null?void 0:n.index)!=null?o:0;h&&h!==this.currentHistoryIndex&&(c.history.direction=h-this.currentHistoryIndex>0?"forwards":"backwards",this.currentHistoryIndex=h),c.animation.animate=!1,c.scroll.reset=!1,c.scroll.target=!1,this.options.animateHistoryBrowsing&&(c.animation.animate=!0,c.scroll.reset=!0),this.hooks.callSync("history:popstate",c,{event:t},()=>{this.performNavigation(c)})}triggerWillOpenNewWindow(t){return!!t.matches('[download], [target="_blank"]')}}function E(){return E=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},E.apply(this,arguments)}const N=s=>String(s).split(".").map(t=>String(parseInt(t||"0",10))).concat(["0","0"]).slice(0,3).join(".");let Ot=class{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(t=>t()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return typeof this.requires!="object"||Object.entries(this.requires).forEach(([t,e])=>{if(!function(i,o,n){const r=function(a,l){var c;if(a==="swup")return(c=l.version)!=null?c:"";{var h;const u=l.findPlugin(a);return(h=u==null?void 0:u.version)!=null?h:""}}(i,n);return!!r&&((a,l)=>l.every(c=>{const[,h,u]=c.match(/^([\D]+)?(.*)$/)||[];var d,f;return((m,p)=>{const w={"":g=>g===0,">":g=>g>0,">=":g=>g>=0,"<":g=>g<0,"<=":g=>g<=0};return(w[p]||w[""])(m)})((f=u,d=N(d=a),f=N(f),d.localeCompare(f,void 0,{numeric:!0})),h||">=")}))(r,o)}(t,e=Array.isArray(e)?e:[e],this.swup)){const i=`${t} ${e.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${i}`)}}),!0}on(t,e,i={}){var o;e=!(o=e).name.startsWith("bound ")||o.hasOwnProperty("prototype")?e.bind(this):e;const n=this.swup.hooks.on(t,e,i);return this.handlersToUnregister.push(n),n}once(t,e,i={}){return this.on(t,e,E({},i,{once:!0}))}before(t,e,i={}){return this.on(t,e,E({},i,{before:!0}))}replace(t,e,i={}){return this.on(t,e,E({},i,{replace:!0}))}off(t,e){return this.swup.hooks.off(t,e)}};function R(){return R=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},R.apply(this,arguments)}let _t=class extends Ot{constructor(t={}){super(),this.name="SwupParallelPlugin",this.requires={swup:">=4.6"},this.defaults={containers:[],keep:0},this.options=void 0,this.originalContainers=null,this.parallelContainers=[],this.startVisit=e=>{this.originalContainers=null,this.visitHasPotentialParallelAnimation(e)&&(e.animation.wait=!0,e.animation.parallel=!0)},this.skipOutAnimation=(e,i)=>{this.isParallelVisit(e)&&(i.skip=!0)},this.insertContainers=e=>{if(!this.isParallelVisit(e))return;const i=this.getParallelContainersForVisit(e);this.parallelContainers=i,this.swup.hooks.call("content:insert",{containers:i},()=>{for(const{all:n,next:r,previous:a,keep:l,remove:c}of i)n.forEach((h,u)=>h.style.setProperty("--swup-parallel-container",`${u}`)),a.setAttribute("aria-hidden","true"),a.before(r),e.animation.animate&&(r.classList.add("is-next-container"),ct(r),r.classList.remove("is-next-container")),a.classList.add("is-previous-container"),l.forEach(h=>h.classList.add("is-kept-container")),c.forEach(h=>h.classList.add("is-removing-container"))}),this.originalContainers=e.containers;const o=this.parallelContainers.map(({selector:n})=>n);e.containers=e.containers.filter(n=>!o.includes(n))},this.resetContainers=e=>{this.originalContainers&&(e.containers=this.originalContainers)},this.cleanupContainers=()=>{const e=this.parallelContainers;this.swup.hooks.call("content:remove",{containers:e},()=>{for(const{remove:i,next:o}of e)i.forEach(n=>n.remove()),o.classList.remove("is-next-container")}),this.parallelContainers=[]},this.options=R({},this.defaults,t)}mount(){this.options.containers.length||(this.options.containers=this.swup.options.containers),this.swup.hooks.create("content:insert"),this.swup.hooks.create("content:remove"),this.on("visit:start",this.startVisit,{priority:1}),this.before("animation:out:await",this.skipOutAnimation,{priority:1}),this.before("content:replace",this.insertContainers,{priority:1}),this.on("content:replace",this.resetContainers),this.on("visit:end",this.cleanupContainers)}getParallelContainersForVisit(t){const{containers:e}=this.options,i=e.filter(o=>t.containers.includes(o));return i.length?i.reduce((o,n)=>{let{keep:r}=this.options;r=typeof r=="object"?r[n]:r,r=Math.max(0,Number(r));const a=t.to.document.querySelector(n),l=Array.from(document.querySelectorAll(n)),c=l[0],h=l.slice(0,r),u=l.slice(r),d=[...new Set([a,c,...h,...u])];return a&&c?[...o,{selector:n,next:a,previous:c,keep:h,remove:u,all:d}]:(console.warn(`Parallel container ${n} not found`),o)},[]):(console.warn("No parallel containers found in list of replaced containers"),[])}isParallelVisit(t){return t.animation.parallel}markVisitAsParallelAnimation(t){t.animation.wait=!0,t.animation.parallel=!0}visitHasPotentialParallelAnimation(t){return t.animation.parallel!==!1&&this.visitHasParallelContainers(t)}visitHasParallelContainers(t){return this.options.containers.some(e=>{const i=document.querySelector(e);return i==null?void 0:i.matches(t.containers.join(","))})}};function T(){return T=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},T.apply(this,arguments)}const F=s=>String(s).split(".").map(t=>String(parseInt(t||"0",10))).concat(["0","0"]).slice(0,3).join(".");let Z=class{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(t=>t()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return typeof this.requires!="object"||Object.entries(this.requires).forEach(([t,e])=>{if(!function(i,o,n){const r=function(a,l){var c;if(a==="swup")return(c=l.version)!=null?c:"";{var h;const u=l.findPlugin(a);return(h=u==null?void 0:u.version)!=null?h:""}}(i,n);return!!r&&((a,l)=>l.every(c=>{const[,h,u]=c.match(/^([\D]+)?(.*)$/)||[];var d,f;return((m,p)=>{const w={"":g=>g===0,">":g=>g>0,">=":g=>g>=0,"<":g=>g<0,"<=":g=>g<=0};return(w[p]||w[""])(m)})((f=u,d=F(d=a),f=F(f),d.localeCompare(f,void 0,{numeric:!0})),h||">=")}))(r,o)}(t,e=Array.isArray(e)?e:[e],this.swup)){const i=`${t} ${e.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${i}`)}}),!0}on(t,e,i={}){var o;e=!(o=e).name.startsWith("bound ")||o.hasOwnProperty("prototype")?e.bind(this):e;const n=this.swup.hooks.on(t,e,i);return this.handlersToUnregister.push(n),n}once(t,e,i={}){return this.on(t,e,T({},i,{once:!0}))}before(t,e,i={}){return this.on(t,e,T({},i,{before:!0}))}replace(t,e,i={}){return this.on(t,e,T({},i,{replace:!0}))}off(t,e){return this.swup.hooks.off(t,e)}};function Y(){return Y=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},Y.apply(this,arguments)}let $t=class{constructor(t){this._raf=null,this._positionY=0,this._velocityY=0,this._targetPositionY=0,this._targetPositionYWithOffset=0,this._direction=0,this.scrollTo=e=>{if(e&&e.nodeType)this._targetPositionY=Math.round(e.getBoundingClientRect().top+window.pageYOffset);else{if(parseInt(this._targetPositionY)!==this._targetPositionY)return void console.error("Argument must be a number or an element.");this._targetPositionY=Math.round(e)}this._targetPositionY>document.documentElement.scrollHeight-window.innerHeight&&(this._targetPositionY=document.documentElement.scrollHeight-window.innerHeight),this._positionY=document.body.scrollTop||document.documentElement.scrollTop,this._direction=this._positionY>this._targetPositionY?-1:1,this._targetPositionYWithOffset=this._targetPositionY+this._direction,this._velocityY=0,this._positionY!==this._targetPositionY?(this.options.onStart(),this._animate()):this.options.onAlreadyAtPositions()},this._animate=()=>{this._update(),this._render(),this._direction===1&&this._targetPositionY>this._positionY||this._direction===-1&&this._targetPositionY<this._positionY?(this._raf=requestAnimationFrame(this._animate),this.options.onTick()):(this._positionY=this._targetPositionY,this._render(),this._raf=null,this.options.onTick(),this.options.onEnd())},this._update=()=>{const e=this._targetPositionYWithOffset-this._positionY;return this._velocityY+=e*this.options.acceleration,this._velocityY*=this.options.friction,this._positionY+=this._velocityY,Math.abs(e)},this._render=()=>{window.scrollTo(0,this._positionY)},this.options=Y({},{onAlreadyAtPositions:()=>{},onCancel:()=>{},onEnd:()=>{},onStart:()=>{},onTick:()=>{},friction:.7,acceleration:.04},t),t&&t.friction&&(this.options.friction=1-t.friction),window.addEventListener("mousewheel",e=>{this._raf&&(this.options.onCancel(),cancelAnimationFrame(this._raf),this._raf=null)},{passive:!0})}};function D(){return D=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},D.apply(this,arguments)}let Ut=class extends Z{constructor(t={}){super(),this.name="SwupScrollPlugin",this.requires={swup:">=4.2.0"},this.scrl=void 0,this.defaults={doScrollingRightAway:!1,animateScroll:{betweenPages:!0,samePageWithHash:!0,samePage:!0},scrollFriction:.3,scrollAcceleration:.04,getAnchorElement:void 0,offset:0,scrollContainers:"[data-swup-scroll-container]",shouldResetScrollPosition:()=>!0,markScrollTarget:!1},this.options=void 0,this.cachedScrollPositions={},this.previousScrollRestoration=void 0,this.currentCacheKey=void 0,this.getAnchorElement=(e="")=>typeof this.options.getAnchorElement=="function"?this.options.getAnchorElement(e):this.swup.getAnchorElement(e),this.getOffset=e=>e?typeof this.options.offset=="function"?parseInt(String(this.options.offset(e)),10):parseInt(String(this.options.offset),10):0,this.onBeforeLinkToSelf=e=>{e.scroll.animate=this.shouldAnimate("samePage")},this.handleScrollToTop=e=>{var i,o;return(i=(o=this.swup).scrollTo)==null||i.call(o,0,e.scroll.animate),!0},this.onBeforeLinkToAnchor=e=>{e.scroll.animate=this.shouldAnimate("samePageWithHash")},this.handleScrollToAnchor=(e,{hash:i})=>this.maybeScrollToAnchor(i,e.scroll.animate),this.onBeforeVisitStart=e=>{e.scroll.scrolledToContent=!1,e.scroll.animate=this.shouldAnimate("betweenPages")},this.onVisitStart=e=>{var i;this.cacheScrollPositions(e.from.url),this.maybeResetScrollPositions(e);const o=(i=e.scroll.target)!=null?i:e.to.hash;e.scroll.animate&&this.options.doScrollingRightAway&&!o&&this.doScrollingBetweenPages(e)},this.handleScrollToContent=e=>{e.scroll.scrolledToContent||this.doScrollingBetweenPages(e),this.restoreScrollContainers(e.to.url)},this.doScrollingBetweenPages=e=>{var i,o;if(e.history.popstate&&!e.animation.animate)return;const n=(i=e.scroll.target)!=null?i:e.to.hash;if(n&&this.maybeScrollToAnchor(n,e.scroll.animate)||!e.scroll.reset)return;const r=this.getCachedScrollPositions(e.to.url),a=(r==null||(o=r.window)==null?void 0:o.top)||0;requestAnimationFrame(()=>{var l,c;return(l=(c=this.swup).scrollTo)==null?void 0:l.call(c,a,e.scroll.animate)}),e.scroll.scrolledToContent=!0},this.maybeResetScrollPositions=e=>{const{popstate:i}=e.history,{url:o}=e.to,{el:n}=e.trigger;i||n&&!this.options.shouldResetScrollPosition(n)||this.resetScrollPositions(o)},this.options=D({},this.defaults,t)}mount(){const t=this.swup;t.hooks.create("scroll:start"),t.hooks.create("scroll:end");const e=this.swup.createVisit({to:this.swup.currentPageUrl});this.scrl=new $t({onStart:()=>t.hooks.callSync("scroll:start",e,void 0),onEnd:()=>t.hooks.callSync("scroll:end",e,void 0),onCancel:()=>t.hooks.callSync("scroll:end",e,void 0),friction:this.options.scrollFriction,acceleration:this.options.scrollAcceleration}),t.scrollTo=(i,o=!0)=>{o?this.scrl.scrollTo(i):(t.hooks.callSync("scroll:start",e,void 0),window.scrollTo(0,i),t.hooks.callSync("scroll:end",e,void 0))},this.previousScrollRestoration=window.history.scrollRestoration,t.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),this.updateScrollTarget=this.updateScrollTarget.bind(this),this.options.markScrollTarget&&(window.addEventListener("popstate",this.updateScrollTarget),window.addEventListener("hashchange",this.updateScrollTarget),this.on("page:view",this.updateScrollTarget),this.on("link:anchor",this.updateScrollTarget),this.on("link:self",this.updateScrollTarget),this.updateScrollTarget()),this.before("visit:start",this.onBeforeVisitStart,{priority:-1}),this.on("visit:start",this.onVisitStart,{priority:1}),this.replace("content:scroll",this.handleScrollToContent),this.before("link:self",this.onBeforeLinkToSelf,{priority:-1}),this.replace("scroll:top",this.handleScrollToTop),this.before("link:anchor",this.onBeforeLinkToAnchor,{priority:-1}),this.replace("scroll:anchor",this.handleScrollToAnchor)}unmount(){super.unmount(),this.previousScrollRestoration&&(window.history.scrollRestoration=this.previousScrollRestoration),window.removeEventListener("popstate",this.updateScrollTarget),window.removeEventListener("hashchange",this.updateScrollTarget),this.cachedScrollPositions={},delete this.swup.scrollTo,delete this.scrl}shouldAnimate(t){return typeof this.options.animateScroll=="boolean"?this.options.animateScroll:this.options.animateScroll[t]}maybeScrollToAnchor(t,e=!1){var i,o;if(!t)return!1;const n=this.getAnchorElement(t);if(!n)return console.warn(`Anchor target ${t} not found`),!1;if(!(n instanceof Element))return console.warn(`Anchor target ${t} is not a DOM node`),!1;const{top:r}=n.getBoundingClientRect(),a=r+window.scrollY-this.getOffset(n);return(i=(o=this.swup).scrollTo)==null||i.call(o,a,e),!0}cacheScrollPositions(t){const e=this.swup.resolveUrl(t),i=A(this.options.scrollContainers).map(n=>({top:n.scrollTop,left:n.scrollLeft})),o={window:{top:window.scrollY,left:window.scrollX},containers:i};this.cachedScrollPositions[e]=o}resetScrollPositions(t){const e=this.swup.resolveUrl(t);delete this.cachedScrollPositions[e]}getCachedScrollPositions(t){const e=this.swup.resolveUrl(t);return this.cachedScrollPositions[e]}restoreScrollContainers(t){const e=this.getCachedScrollPositions(t);e&&e.containers.length!==0&&A(this.options.scrollContainers).forEach((i,o)=>{const n=e.containers[o];n!=null&&(i.scrollTop=n.top,i.scrollLeft=n.left)})}updateScrollTarget(){var t;const{hash:e}=window.location,i=document.querySelector("[data-swup-scroll-target]");let o=this.getAnchorElement(e);o instanceof HTMLBodyElement&&(o=null),i!==o&&(i==null||i.removeAttribute("data-swup-scroll-target"),(t=o)==null||t.setAttribute("data-swup-scroll-target",""))}};function U(){return U=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},U.apply(this,arguments)}function K(){return window.matchMedia("(hover: hover)").matches}function _(s){return!!s&&(s instanceof HTMLAnchorElement||s instanceof SVGAElement)}const z=window.requestIdleCallback||(s=>setTimeout(s,1)),Vt=["preloadVisibleLinks"];class xt extends Z{constructor(t={}){var e;super(),e=this,this.name="SwupPreloadPlugin",this.requires={swup:">=4.5"},this.defaults={throttle:5,preloadInitialPage:!0,preloadHoveredLinks:!0,preloadVisibleLinks:{enabled:!1,threshold:.2,delay:500,containers:["body"],ignore:()=>!1}},this.options=void 0,this.queue=void 0,this.preloadObserver=void 0,this.preloadPromises=new Map,this.mouseEnterDelegate=void 0,this.touchStartDelegate=void 0,this.focusDelegate=void 0,this.onPageLoad=(n,r,a)=>{const{url:l}=n.to;return l&&this.preloadPromises.has(l)?this.preloadPromises.get(l):a(n,r)},this.onMouseEnter=async function(n){if(n.target!==n.delegateTarget||!K())return;const r=n.delegateTarget;if(!_(r))return;const{url:a,hash:l}=y.fromElement(r),c=e.swup.createVisit({to:a,hash:l,el:r,event:n});e.swup.hooks.callSync("link:hover",c,{el:r,event:n}),e.preload(r,{priority:!0})},this.onTouchStart=n=>{if(K())return;const r=n.delegateTarget;_(r)&&this.preload(r,{priority:!0})},this.onFocus=n=>{const r=n.delegateTarget;_(r)&&this.preload(r,{priority:!0})};const{preloadVisibleLinks:i}=t,o=function(n,r){if(n==null)return{};var a,l,c={},h=Object.keys(n);for(l=0;l<h.length;l++)r.indexOf(a=h[l])>=0||(c[a]=n[a]);return c}(t,Vt);this.options=U({},this.defaults,o),typeof i=="object"?this.options.preloadVisibleLinks=U({},this.options.preloadVisibleLinks,{enabled:!0},i):this.options.preloadVisibleLinks.enabled=!!i,this.preload=this.preload.bind(this),this.queue=function(n=1){const r=[],a=[];let l=0,c=0;function h(){c<n&&l>0&&((a.shift()||r.shift()||(()=>{}))(),l--,c++)}return{add:function(u,d=!1){if(u.__queued){if(!d)return;{const f=r.indexOf(u);if(f>=0){const m=r.splice(f,1);l-=m.length}}}u.__queued=!0,(d?a:r).push(u),l++,l<=1&&h()},next:function(){c--,h()}}}(this.options.throttle)}mount(){const t=this.swup;t.options.cache?(t.hooks.create("page:preload"),t.hooks.create("link:hover"),t.preload=this.preload,t.preloadLinks=this.preloadLinks,this.replace("page:load",this.onPageLoad),this.preloadLinks(),this.on("page:view",()=>this.preloadLinks()),this.options.preloadVisibleLinks.enabled&&(this.preloadVisibleLinks(),this.on("page:view",()=>this.preloadVisibleLinks())),this.options.preloadHoveredLinks&&this.preloadLinksOnAttention(),this.options.preloadInitialPage&&this.preload(S())):console.warn("SwupPreloadPlugin: swup cache needs to be enabled for preloading")}unmount(){var t,e,i;this.swup.preload=void 0,this.swup.preloadLinks=void 0,this.preloadPromises.clear(),(t=this.mouseEnterDelegate)==null||t.destroy(),(e=this.touchStartDelegate)==null||e.destroy(),(i=this.focusDelegate)==null||i.destroy(),this.stopPreloadingVisibleLinks()}async preload(t,e={}){var i;let o,n;const r=(i=e.priority)!=null&&i;if(Array.isArray(t))return Promise.all(t.map(l=>this.preload(l)));if(_(t))n=t,{href:o}=y.fromElement(t);else{if(typeof t!="string")return;o=t}if(!o)return;if(this.preloadPromises.has(o))return this.preloadPromises.get(o);if(!this.shouldPreload(o,{el:n}))return;const a=new Promise(l=>{this.queue.add(()=>{this.performPreload(o).catch(()=>{}).then(c=>l(c)).finally(()=>{this.queue.next(),this.preloadPromises.delete(o)})},r)});return this.preloadPromises.set(o,a),a}preloadLinks(){z(()=>{Array.from(document.querySelectorAll("a[data-swup-preload], [data-swup-preload-all] a")).forEach(t=>this.preload(t))})}preloadLinksOnAttention(){const{swup:t}=this,{linkSelector:e}=t.options,i={passive:!0,capture:!0};this.mouseEnterDelegate=t.delegateEvent(e,"mouseenter",this.onMouseEnter,i),this.touchStartDelegate=t.delegateEvent(e,"touchstart",this.onTouchStart,i),this.focusDelegate=t.delegateEvent(e,"focus",this.onFocus,i)}preloadVisibleLinks(){if(this.preloadObserver)return void this.preloadObserver.update();const{threshold:t,delay:e,containers:i}=this.options.preloadVisibleLinks;this.preloadObserver=function({threshold:o,delay:n,containers:r,callback:a,filter:l}){const c=new Map,h=new IntersectionObserver(m=>{m.forEach(p=>{p.isIntersecting?u(p.target):d(p.target)})},{threshold:o}),u=m=>{var p;const{href:w}=y.fromElement(m),g=(p=c.get(w))!=null?p:new Set;c.set(w,g),g.add(m),setTimeout(()=>{const k=c.get(w);k!=null&&k.size&&(a(m),h.unobserve(m),k.delete(m))},n)},d=m=>{var p;const{href:w}=y.fromElement(m);(p=c.get(w))==null||p.delete(m)},f=()=>{z(()=>{const m=r.map(p=>`${p} a[*|href]`).join(", ");Array.from(document.querySelectorAll(m)).filter(p=>l(p)).forEach(p=>h.observe(p))})};return{start:()=>f(),stop:()=>h.disconnect(),update:()=>(c.clear(),f())}}({threshold:t,delay:e,containers:i,callback:o=>this.preload(o),filter:o=>{if(this.options.preloadVisibleLinks.ignore(o)||!o.matches(this.swup.options.linkSelector))return!1;const{href:n}=y.fromElement(o);return this.shouldPreload(n,{el:o})}}),this.preloadObserver.start()}stopPreloadingVisibleLinks(){this.preloadObserver&&this.preloadObserver.stop()}shouldPreload(t,{el:e}={}){const{url:i,href:o}=y.fromUrl(t);return!(!function(){if(navigator.connection){var n;if(navigator.connection.saveData||(n=navigator.connection.effectiveType)!=null&&n.endsWith("2g"))return!1}return!0}()||this.swup.cache.has(i)||this.preloadPromises.has(i)||this.swup.shouldIgnoreVisit(o,{el:e})||e&&this.swup.resolveUrl(i)===this.swup.resolveUrl(S()))}async performPreload(t){var e=this;const{url:i}=y.fromUrl(t),o=this.swup.createVisit({to:i});return await this.swup.hooks.call("page:preload",o,{url:i},async function(r,a){return a.page=await e.swup.fetchPage(t,{visit:r}),a.page})}}class qt extends tt{constructor(){super("Transitions")}mount(t){this.swup=new Lt({containers:["[data-swup-container]"],animateHistoryBrowsing:!0,plugins:[new _t,new xt,new Ut({doScrollingRightAway:!0,animateScroll:{betweenPages:!0,samePageWithHash:!0,samePage:!0},shouldResetScrollPosition:e=>!1})]}),this.swup.hooks.on("link:click",()=>{b.classList.add("is-loading")},{priority:-100}),this.swup.hooks.on("link:self",()=>{V.delayedCall(.3,()=>{b.classList.remove("is-loading")})}),this.swup.hooks.on("content:insert",(e,{containers:i})=>{b.classList.add("has-transition"),b.classList.remove("has-dom-ready"),b.classList.remove("has-dom-ready-callback"),b.classList.remove("has-dom-animated");for(const{next:o,remove:n}of i)this.newContainer=o,this.newContainer.classList.add("is-next-container"),et(this.newContainer)}),this.swup.hooks.before("content:remove",(e,{containers:i})=>{console.log("------ content::remove"),b.classList.remove("is-loading"),this.newContainer.classList.remove("is-next-container"),V.delayedCall(window.readyDelay,()=>{b.classList.add("has-dom-ready"),I.setAttribute("data-template",this.newContainer.getAttribute("data-template")),V.delayedCall(window.readyCallbackDelay,()=>{b.classList.add("has-dom-ready-callback"),b.classList.add("has-dom-animated"),b.classList.remove("has-transition")})})}),this.swup.hooks.on("fetch:error",()=>{console.log("--- fetch error ---")}),this.swup.hooks.on("fetch:timeout",()=>{console.log("--- fetch timeout ---")}),this.swup.scrollTo=(e,i=!0)=>{if(!i){this.swup.hooks.callSync("scroll:start",void 0),window.scrollTo(0,e),this.swup.hooks.callSync("scroll:end",void 0);return}},I.setAttribute("data-template",this.$("[data-swup-container]")[0].getAttribute("data-template"))}}customElements.define("c-transitions",qt);export{qt as Transitions};
